{"ast":null,"code":"/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\n// Use the AEM Headless SDK to make the GraphQL requests\nimport AEMHeadless from \"@adobe/aem-headless-client-js\";\n\n// environment variable for configuring the headless client\nconst {\n  REACT_APP_HOST_URI,\n  REACT_APP_GRAPHQL_ENDPOINT,\n  REACT_APP_USE_PROXY,\n  REACT_APP_AUTH_METHOD,\n  REACT_APP_DEV_TOKEN,\n  REACT_APP_BASIC_AUTH_USER,\n  REACT_APP_BASIC_AUTH_PASS\n} = process.env;\n\n// In a production application the serviceURL should be set to the production AEM Publish environment\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\n\nconst serviceURL = REACT_APP_USE_PROXY === \"true\" ? \"/\" : REACT_APP_HOST_URI;\n\n// Get authorization based on environment variables\n// authorization is not needed when connecting to Publish environments\nconst setAuthorization = () => {\n  if (REACT_APP_AUTH_METHOD === \"basic\") {\n    return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\n  } else if (REACT_APP_AUTH_METHOD === \"dev-token\") {\n    return REACT_APP_DEV_TOKEN;\n  } else {\n    // no authentication set\n    return;\n  }\n};\n\n// Initialize the AEM Headless Client and export it for other files to use\nconst aemHeadlessClient = new AEMHeadless({\n  serviceURL: serviceURL,\n  endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n  auth: setAuthorization()\n});\n\n// Prefix URLs with AEM Host\nexport function addAemHost(url) {\n  if (url.startsWith(\"/\")) {\n    return new URL(url, REACT_APP_HOST_URI).toString();\n  }\n  return url;\n}\nexport default aemHeadlessClient;","map":{"version":3,"names":["AEMHeadless","REACT_APP_HOST_URI","REACT_APP_GRAPHQL_ENDPOINT","REACT_APP_USE_PROXY","REACT_APP_AUTH_METHOD","REACT_APP_DEV_TOKEN","REACT_APP_BASIC_AUTH_USER","REACT_APP_BASIC_AUTH_PASS","process","env","serviceURL","setAuthorization","aemHeadlessClient","endpoint","auth","addAemHost","url","startsWith","URL","toString"],"sources":["/Users/ynaka/Downloads/summit-2024-l425-ue-z-final-with-events/react-app/src/api/aemHeadlessClient.js"],"sourcesContent":["/*\nCopyright 2022 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\n\n// Use the AEM Headless SDK to make the GraphQL requests\nimport AEMHeadless from \"@adobe/aem-headless-client-js\";\n\n// environment variable for configuring the headless client\nconst {\n  REACT_APP_HOST_URI,\n  REACT_APP_GRAPHQL_ENDPOINT,\n  REACT_APP_USE_PROXY,\n  REACT_APP_AUTH_METHOD,\n  REACT_APP_DEV_TOKEN,\n  REACT_APP_BASIC_AUTH_USER,\n  REACT_APP_BASIC_AUTH_PASS,\n} = process.env;\n\n// In a production application the serviceURL should be set to the production AEM Publish environment\n// In development the serviceURL can be set to '/' which will be a relative proxy is used (see ../authMethods.js) to avoid CORS issues\n\nconst serviceURL = REACT_APP_USE_PROXY === \"true\" ? \"/\" : REACT_APP_HOST_URI;\n\n// Get authorization based on environment variables\n// authorization is not needed when connecting to Publish environments\nconst setAuthorization = () => {\n  if (REACT_APP_AUTH_METHOD === \"basic\") {\n    return [REACT_APP_BASIC_AUTH_USER, REACT_APP_BASIC_AUTH_PASS];\n  } else if (REACT_APP_AUTH_METHOD === \"dev-token\") {\n    return REACT_APP_DEV_TOKEN;\n  } else {\n    // no authentication set\n    return;\n  }\n};\n\n// Initialize the AEM Headless Client and export it for other files to use\nconst aemHeadlessClient = new AEMHeadless({\n  serviceURL: serviceURL,\n  endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n  auth: setAuthorization(),\n});\n\n// Prefix URLs with AEM Host\nexport function addAemHost(url) {\n  if (url.startsWith(\"/\")) {\n    return new URL(url, REACT_APP_HOST_URI).toString();\n  }\n\n  return url;\n}\n\nexport default aemHeadlessClient;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,WAAW,MAAM,+BAA+B;;AAEvD;AACA,MAAM;EACJC,kBAAkB;EAClBC,0BAA0B;EAC1BC,mBAAmB;EACnBC,qBAAqB;EACrBC,mBAAmB;EACnBC,yBAAyB;EACzBC;AACF,CAAC,GAAGC,OAAO,CAACC,GAAG;;AAEf;AACA;;AAEA,MAAMC,UAAU,GAAGP,mBAAmB,KAAK,MAAM,GAAG,GAAG,GAAGF,kBAAkB;;AAE5E;AACA;AACA,MAAMU,gBAAgB,GAAGA,CAAA,KAAM;EAC7B,IAAIP,qBAAqB,KAAK,OAAO,EAAE;IACrC,OAAO,CAACE,yBAAyB,EAAEC,yBAAyB,CAAC;EAC/D,CAAC,MAAM,IAAIH,qBAAqB,KAAK,WAAW,EAAE;IAChD,OAAOC,mBAAmB;EAC5B,CAAC,MAAM;IACL;IACA;EACF;AACF,CAAC;;AAED;AACA,MAAMO,iBAAiB,GAAG,IAAIZ,WAAW,CAAC;EACxCU,UAAU,EAAEA,UAAU;EACtBG,QAAQ,EAAEX,0BAA0B;EACpCY,IAAI,EAAEH,gBAAgB,CAAC;AACzB,CAAC,CAAC;;AAEF;AACA,OAAO,SAASI,UAAUA,CAACC,GAAG,EAAE;EAC9B,IAAIA,GAAG,CAACC,UAAU,CAAC,GAAG,CAAC,EAAE;IACvB,OAAO,IAAIC,GAAG,CAACF,GAAG,EAAEf,kBAAkB,CAAC,CAACkB,QAAQ,CAAC,CAAC;EACpD;EAEA,OAAOH,GAAG;AACZ;AAEA,eAAeJ,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}